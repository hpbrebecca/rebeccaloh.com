<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rebecca Loh - Project 1</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&family=Cormorant+Garamond:wght@300;400;500&family=Noto+Serif+TC:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Main Content Container -->
    <div class="main-content">
        <!-- Profile Image with Flip Effect -->
        <div class="profile-image-container">
            <div class="profile-flip-card">
                <div class="profile-flip-front">
                    <img src="profile.jpg" alt="Rebecca Loh" class="profile-image" id="profileImage" onerror="console.error('Image failed to load. Please ensure profile.jpg exists in the project1 folder.'); this.style.border='2px solid rgba(255,255,255,0.5)'; this.style.background='rgba(255,255,255,0.15)'; this.style.opacity='1';">
                </div>
                <div class="profile-flip-back">
                    <a href="https://ch.linkedin.com/in/rebiloh" class="linkedin-icon-link" id="linkedinIconLink">
                        <svg class="linkedin-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" fill="rgba(255, 255, 255, 0.7)"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Name Link -->
        <a href="https://ch.linkedin.com/in/rebiloh" class="name-link" id="nameLink">
            Rebecca Loh
        </a>
    </div>
    
    <!-- Left Column - Audio Player and Language Selector -->
    <div class="left-column">
        <!-- Audio Player - Premium Style -->
        <div class="audio-player-container" id="audioPlayerContainer">
            <audio id="backgroundMusic" loop autoplay>
                <source src="music.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
            <div class="audio-visualizer" id="audioVisualizer">
                <div class="audio-bar" style="--delay: 0s"></div>
                <div class="audio-bar" style="--delay: 0.1s"></div>
                <div class="audio-bar" style="--delay: 0.2s"></div>
                <div class="audio-bar" style="--delay: 0.3s"></div>
                <div class="audio-bar" style="--delay: 0.4s"></div>
            </div>
            <button class="audio-control-btn" id="audioControlBtn" aria-label="Play/Pause music">
                <svg class="audio-icon play-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 5v14l11-7z" fill="rgba(255, 255, 255, 0.8)"/>
                </svg>
                <svg class="audio-icon pause-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z" fill="rgba(255, 255, 255, 0.8)"/>
                </svg>
            </button>
        </div>
        
        <!-- Language Selector - Futuristic 2040 Style -->
        <div class="language-selector" id="languageSelector">
            <div class="language-trigger" id="languageTrigger">
                <span class="language-text" id="languageText">Language</span>
                <div class="language-indicator"></div>
            </div>
            <div class="language-dropdown" id="languageDropdown">
                <div class="lang-option" data-lang="en">
                    <span class="lang-code">EN</span>
                    <span class="lang-name">English</span>
                </div>
                <div class="lang-option" data-lang="de">
                    <span class="lang-code">DE</span>
                    <span class="lang-name">Deutsch</span>
                </div>
                <div class="lang-option" data-lang="fr">
                    <span class="lang-code">FR</span>
                    <span class="lang-name">Français</span>
                </div>
                <div class="lang-option" data-lang="zh">
                    <span class="lang-code">中文</span>
                    <span class="lang-name">中文</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Quote Display -->
    <div class="quote-container" id="quoteContainer"></div>
    
    <script src="nebula.js"></script>
    <script src="quotes.js"></script>
    <script src="../script.js"></script>
    <script>
        // Ensure image is visible after load or error
        const profileImage = document.getElementById('profileImage');
        if (profileImage) {
            // If image loads successfully, ensure it becomes visible
            profileImage.addEventListener('load', function() {
                // Animation will handle visibility, but ensure it's not hidden
                this.style.visibility = 'visible';
            });
            
            // If image fails to load, make placeholder visible immediately
            profileImage.addEventListener('error', function() {
                this.style.opacity = '1';
                this.style.visibility = 'visible';
                this.style.background = 'rgba(255, 255, 255, 0.15)';
                this.style.border = '2px solid rgba(255, 255, 255, 0.5)';
            });
            
            // Check if image is already loaded (cached)
            if (profileImage.complete && profileImage.naturalHeight !== 0) {
                profileImage.style.visibility = 'visible';
            }
        }
        
        // Ensure LinkedIn icon link is set up (script.js will handle deep linking)
        const linkedinIconLink = document.getElementById('linkedinIconLink');
        if (linkedinIconLink && !linkedinIconLink.hasAttribute('data-setup')) {
            linkedinIconLink.setAttribute('data-setup', 'true');
        }
        
        // Audio Player Control - Force immediate start with multiple methods
        const audioPlayer = document.getElementById('backgroundMusic');
        const audioControlBtn = document.getElementById('audioControlBtn');
        
        if (audioPlayer && audioControlBtn) {
            let audioStarted = false;
            
            // Function to start audio
            function startAudio() {
                if (audioStarted || !audioPlayer.paused) return;
                
                audioPlayer.play().then(() => {
                    audioStarted = true;
                    audioControlBtn.classList.add('playing');
                }).catch(error => {
                    // Silently fail, will try again
                });
            }
            
            // Method 1: Immediate attempt (as soon as script runs)
            startAudio();
            
            // Method 2: Try on DOMContentLoaded
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', startAudio);
            } else {
                startAudio();
            }
            
            // Method 3: Try on window load
            window.addEventListener('load', function() {
                if (!audioStarted) {
                    setTimeout(startAudio, 50);
                }
            });
            
            // Method 4: Try on first minimal user interaction (MOST RELIABLE)
            const interactionEvents = [
                'mousemove',      // Smallest movement
                'mousedown',      
                'touchstart',     
                'touchmove',      
                'click',          
                'keydown',        
                'scroll',         
                'wheel',
                'pointermove'     // Pointer movement
            ];
            
            const startOnInteraction = function() {
                if (!audioStarted) {
                    startAudio();
                    // Remove all listeners after successful start
                    interactionEvents.forEach(event => {
                        document.removeEventListener(event, startOnInteraction);
                        window.removeEventListener(event, startOnInteraction);
                        document.body.removeEventListener(event, startOnInteraction);
                    });
                }
            };
            
            // Add listeners to document, window, and body for maximum coverage
            interactionEvents.forEach(event => {
                document.addEventListener(event, startOnInteraction, { once: true, passive: true });
                window.addEventListener(event, startOnInteraction, { once: true, passive: true });
                document.body.addEventListener(event, startOnInteraction, { once: true, passive: true });
            });
            
            // Method 5: Try on visibility change
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden && !audioStarted) {
                    startAudio();
                }
            });
            
            // Method 6: Try on focus
            window.addEventListener('focus', function() {
                if (!audioStarted) {
                    startAudio();
                }
            });
            
            // Toggle pause/play on button click
            audioControlBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                
                if (audioPlayer.paused) {
                    audioPlayer.play().then(() => {
                        audioControlBtn.classList.add('playing');
                        audioStarted = true;
                    }).catch(error => {
                        console.log('Audio playback failed:', error);
                    });
                } else {
                    audioPlayer.pause();
                    audioControlBtn.classList.remove('playing');
                }
            });
            
            // Update button state
            audioPlayer.addEventListener('ended', function() {
                audioControlBtn.classList.remove('playing');
            });
            
            // Handle audio errors
            audioPlayer.addEventListener('error', function(e) {
                console.error('Audio error:', e);
            });
        }
    </script>
</body>
</html>

